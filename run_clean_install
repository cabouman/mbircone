#!/bin/bash

# Clean out old installation
rm mbircone/cone3D/*.c
rm mbircone/cone3D/*.so
rm -r build
rm -r dist
rm -r mbircone.egg-info

# Create and activate new conda environment
conda deactivate
conda create -n mbircone python=3.8 
source activate mbircone 

# Install requirements and package
pip install -r requirements.txt 
pip install -r demo/requirements.txt 
pip install -r docs/requirements.txt 
pip install . 

# Build documentation
cd docs
MBIRCONE_BUILD_DOCS=true make html
cd ..

